(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21ab15"],{bd30:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"w-full lg:w-3/5 max-w-xl mx-auto sm:overflow-visible overflow-hidden"},[t._m(0),n("main",[n("div",{staticClass:"px-4 py-6 mb-8 bg-white rounded-lg shadow-md"},[n("h4",{staticClass:"\n          flex\n          justify-between\n          items-center\n          mb-4\n          text-lg\n          font-medium\n          text-gray-600\n        "},[t._v(" Текущий баланс ")]),n("span",{staticClass:"text-5xl font-semibold"},[t._v(t._s(t.userBalance)),n("span",{staticClass:"text-2xl"},[t._v("₽")])]),n("p",{staticClass:"text-sm text-gray-400 pb-6 border-b"},[t._v("1 рубль = 1 подписчик")]),n("h4",{staticClass:"\n          flex\n          justify-between\n          items-center\n          my-4\n          text-lg\n          font-medium\n          text-gray-600\n        "},[t._v(" Пополнение ")]),n("div",{staticClass:"flex flex-wrap space-x-2 mb-4"},[n("button",{staticClass:"\n            item-price\n            btn\n            py-2\n            px-5\n            bg-green-700\n            text-white\n            hover:bg-green-800\n          ",attrs:{type:"button"},on:{click:function(e){t.inputBalance=590}}},[t._v(" 590₽ ")]),n("button",{staticClass:"\n            item-price\n            btn\n            py-2\n            px-5\n            bg-green-700\n            text-white\n            hover:bg-green-800\n          ",attrs:{type:"button"},on:{click:function(e){t.inputBalance=750}}},[t._v(" 750₽ ")]),n("button",{staticClass:"\n            item-price\n            btn\n            py-2\n            px-5\n            bg-green-700\n            text-white\n            hover:bg-green-800\n          ",attrs:{type:"button"},on:{click:function(e){t.inputBalance=900}}},[t._v(" 900₽ ")]),n("button",{staticClass:"\n            item-price\n            btn\n            py-2\n            px-5\n            bg-green-700\n            text-white\n            hover:bg-green-800\n          ",attrs:{type:"button"},on:{click:function(e){t.inputBalance=1500}}},[t._v(" 1 500₽ ")]),n("button",{staticClass:"\n            item-price\n            btn\n            py-2\n            px-5\n            bg-green-700\n            text-white\n            hover:bg-green-800\n          ",attrs:{type:"button"},on:{click:function(e){t.inputBalance=3e3}}},[t._v(" 3 000₽ ")])]),n("div",{staticClass:"flex justify-between items-center"},[n("p",{staticClass:"text-xl"},[t._v("К оплате:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.inputBalance,expression:"inputBalance"}],staticClass:"form-input w-32 focus:border-black focus:outline-none",attrs:{type:"number",name:"balance",id:"balance"},domProps:{value:t.inputBalance},on:{input:function(e){e.target.composing||(t.inputBalance=e.target.value)}}})]),t.validError?n("p",{staticClass:"text-sm text-red-700"},[t._v(" Минимальная сумма пополнения 590 рублей ")]):t._e(),n("button",{staticClass:"btn btn-save mt-4",attrs:{type:"button"},on:{click:t.goToPay}},[t._v(" Пополнить ")])]),n("router-link",{staticClass:"underline text-sm hover:opacity-70 ",attrs:{to:{name:"BalanceHistory"}}},[t._v("История пополнений")])],1)])},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"pb-4"},[n("h1",{staticClass:"text-2xl font-normal",attrs:{id:"title"}},[t._v("Баланс")])])}],i=n("5530"),r=(n("d3b7"),n("2f62")),o={name:"Balance",data:function(){return{inputBalance:590,validError:!1}},computed:Object(i["a"])({},Object(r["c"])(["userBalance"])),methods:{checkValid:function(){return this.inputBalance<590&&this.inputBalance>1e5?(this.validError=!0,!1):(this.validError=!1,!0)},goToPay:function(){var t=this;this.checkValid(),this.$Progress.start(),fetch("".concat("https://api.client-turbine.ru","/api/payments/create"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("access_token")},body:JSON.stringify({value:this.inputBalance})}).then((function(t){return t.ok?t.json():Promise.reject(t)})).then((function(e){"ok"==e.status?(window.location.href=e.url,t.$Progress.finish()):(alert("URL не получен"),t.$Progress.fail())})).catch((function(e){throw t.$Progress.fail(),alert("Ошибка пополнения"),401==e.status&&(localStorage.removeItem("access_token"),localStorage.removeItem("name_user"),localStorage.removeItem("email_user"),localStorage.removeItem("created_at_user")),e}))}}},c=o,l=n("2877"),u=Object(l["a"])(c,a,s,!1,null,null,null);e["default"]=u.exports}}]);